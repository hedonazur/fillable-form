{% extends "formApp/base_formApp.html" %}
{% load static %}
{% load i18n %}
{% block formApp_content %}

<div >
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Create Proforma</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group me-2">
        <a href="{% url 'proformas' %}">
          <button type="button" class="btn btn-sm btn-outline-secondary">Go Back</button>
        </a>
      </div>
    </div>
  </div>  
  <div class="row g-5">
    <div class="col-md-5 col-lg-5 order-md-last">     
      <h4 class="d-flex justify-content-between align-items-center mb-3">
        <span class="text-primary">Products</span>
        <span class="badge bg-primary rounded-pill">3</span>
      </h4>
      <h6 class="d-flex justify-content-between align-items-center mb-3">
        <span>Add more products to your proforma</span>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group me-2">
            <button href="#addProductModal" type="button" class="btn btn-primary" data-bs-toggle="modal">Add</button>
          </div>
        </div>   
      </h6>
      <ul class="list-group mb-3">
        {% if products|length > 0 %}
            {% for product in products %}
                <li class="list-group-item d-flex justify-content-between lh-sm">
                <div>
                    <h6 class="my-0">{{ product.title}}</h6>
                    <small class="text-body-secondary">{{ product.description}}</small>
                    <small class="text-body-secondary">{{ product.quantity}}</small>
                </div>
                <span class="text-body-secondary">{{ product.price }}</span>
                </li>

            {% endfor %}
            <li class="list-group-item d-flex justify-content-between">
                <span>Total (USD)</span>
                <strong>$20</strong>
            </li>
        {% else %}
        No hay 
        {% endif %}
      </ul>
    </div>
    <div class="col-md-7 col-lg-7">
      <h4 class="mb-3">New Proforma</h4>
      <form method="post">
        {% csrf_token %}
        <hr class="my-4">

        


        <div class="row g-3">
          <div class="col-sm-6">
            <label class="form-label">{% trans "Title" %}</label>
              {{ proforma_form.title }}
            <div class="invalid-feedback">
              Valid first name is required.
            </div>
          </div>

          <div class="col-sm-6">
            <label class="form-label">{% trans "Salesman Name" %}</label>
                {{ proforma_form.salesmanName}}
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>
          

          <div class="form-check">
            {{ proforma_form.delivery}}
            <label class="form-check-label" for="same-address">Include delivery</label>
          </div>
          <div class="col-sm-6">
            <label class="form-label">{% trans "Delivery price" %}</label>
              {{ proforma_form.deliveryPrice }}
            <div class="invalid-feedback">
              Valid first name is required.
            </div>
          </div>

          <div class="col-sm-6">
            <label class="form-label">{% trans "Total" %}</label>
                {{ proforma_form.total}}
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>

          <div class="col-sm-6">
            <label class="form-label">{% trans "Gran Total" %}</label>
                {{ proforma_form.grandTotal}}
            <div class="invalid-feedback">
              Valid last name is required.
            </div>
          </div>
        <hr class="my-4">

        <h4 class="mb-3">Select Client to add</h4>
        <form action="post">
          {% csrf_token %}
          <p>Current Client: </p>
              {{ proforma_form.client.clientFirstName}}
          <div class="d-flex justify-content-between align-items-center mb-3">
                {{ client_form }}            
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="btn-group me-2">
                <button type="submit" class="btn btn-primary">Add Client</button>
              </div>
            </div>   
          </div>
        </form>

        <div class="btn-toolbar mb-2 mb-md-0">
          
          <div class="btn-group me-2">
            <button href="#addClientModal" type="button" class="btn btn-primary" data-bs-toggle="modal">Add New Client</button>
          </div>
        </div>
        <hr class="my-4">

        <button class="w-100 btn btn-primary btn-lg" type="submit">Continue to checkout</button>
      </form>
    </div>
  </div>
</div>
{% include 'formApp/client_modal.html' with form=client_form %}
{% include 'formApp/product_modal.html' with form=product_form %}
{% endblock %}